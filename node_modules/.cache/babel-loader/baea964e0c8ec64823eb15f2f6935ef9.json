{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport { mergeClasses } from '@material-ui/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport socketIOClient from 'socket.io-client';\nimport green_tank from '../../assets/green_tank.png';\n\nvar util = require('../../util/util'); //Necessary to use this function to allow the useStyles hook to work\n\n\nvar UiTableWithStyles = function UiTableWithStyles(_ref) {\n  var rows = _ref.rows;\n  var useStyles = makeStyles(function (theme) {\n    var _paper;\n\n    return {\n      root: {\n        flexGrow: 1,\n        padding: '30px',\n        fontSize: '16px'\n      },\n      paper: (_paper = {\n        padding: theme.spacing(2),\n        textAlign: 'center',\n        color: theme.palette.text.secondary\n      }, _defineProperty(_paper, \"padding\", '30px 15px 32px 15px'), _defineProperty(_paper, \"backgroundImage\", \"url(\".concat(green_tank, \")\")), _paper)\n    };\n  }); //only works inside a functional component\n\n  var classes = useStyles();\n  var machines = rows;\n  return React.createElement(\"div\", {\n    className: \"jsx-827933388\" + \" \" + (mergeClasses.root || \"\")\n  }, React.createElement(_JSXStyle, {\n    id: \"827933388\"\n  }, \"..jsx-827933388{mergeClasses.root;}.jsx-827933388{margin:2% 2% 3% 2%;}..jsx-827933388{label;}.jsx-827933388{font-size:16px;}..jsx-827933388{machine_1;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2JibmV3ZXkvbm9kZS13b3Jrc3BhY2UvbmV4dC1teXNxbC9jb21wb25lbnRzL01hY2hpbmUvVWkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBeUNrQixBQUU0QixBQUF1QixBQUNuQyxBQUFpQixBQUNiLE1BREgsSUFDSSxLQURhLEdBREwsQ0FBdUIiLCJmaWxlIjoiL2hvbWUvYmJuZXdleS9ub2RlLXdvcmtzcGFjZS9uZXh0LW15c3FsL2NvbXBvbmVudHMvTWFjaGluZS9VaS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBtYWtlU3R5bGVzIH0gZnJvbSAnQG1hdGVyaWFsLXVpL2NvcmUvc3R5bGVzJztcbmltcG9ydCBQYXBlciBmcm9tICdAbWF0ZXJpYWwtdWkvY29yZS9QYXBlcic7XG5cbmltcG9ydCBHcmlkIGZyb20gJ0BtYXRlcmlhbC11aS9jb3JlL0dyaWQnO1xuaW1wb3J0IHsgbWVyZ2VDbGFzc2VzIH0gZnJvbSAnQG1hdGVyaWFsLXVpL3N0eWxlcyc7XG5pbXBvcnQgQ2lyY3VsYXJQcm9ncmVzcyBmcm9tICdAbWF0ZXJpYWwtdWkvY29yZS9DaXJjdWxhclByb2dyZXNzJztcblxuaW1wb3J0IHNvY2tldElPQ2xpZW50IGZyb20gJ3NvY2tldC5pby1jbGllbnQnO1xuXG5pbXBvcnQgZ3JlZW5fdGFuayBmcm9tICcuLi8uLi9hc3NldHMvZ3JlZW5fdGFuay5wbmcnO1xuXG5jb25zdCB1dGlsID0gcmVxdWlyZSgnLi4vLi4vdXRpbC91dGlsJylcblxuLy9OZWNlc3NhcnkgdG8gdXNlIHRoaXMgZnVuY3Rpb24gdG8gYWxsb3cgdGhlIHVzZVN0eWxlcyBob29rIHRvIHdvcmtcbmNvbnN0IFVpVGFibGVXaXRoU3R5bGVzID0gKHtyb3dzfSkgPT4ge1xuICBjb25zdCB1c2VTdHlsZXMgPSBtYWtlU3R5bGVzKHRoZW1lID0+ICh7XG4gICAgcm9vdDoge1xuICAgICAgZmxleEdyb3c6IDEsXG4gICAgICBwYWRkaW5nOiAnMzBweCcsXG4gICAgICBmb250U2l6ZTogJzE2cHgnLCAgIFxuICAgIH0sXG4gICAgcGFwZXI6IHtcbiAgICAgIHBhZGRpbmc6IHRoZW1lLnNwYWNpbmcoMiksXG4gICAgICB0ZXh0QWxpZ246ICdjZW50ZXInLFxuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUudGV4dC5zZWNvbmRhcnksXG4gICAgICBwYWRkaW5nOiAnMzBweCAxNXB4IDMycHggMTVweCcsXG4gICAgICBiYWNrZ3JvdW5kSW1hZ2UgOiBgdXJsKCR7Z3JlZW5fdGFua30pYFxuICAgIH1cbiAgXG4gIH0pKTtcblxuICAvL29ubHkgd29ya3MgaW5zaWRlIGEgZnVuY3Rpb25hbCBjb21wb25lbnRcbiAgY29uc3QgY2xhc3NlcyA9IHVzZVN0eWxlcygpO1xuXG4gIGNvbnN0IG1hY2hpbmVzID0gcm93cztcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXttZXJnZUNsYXNzZXMucm9vdH0+XG5cblxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAgIC57bWVyZ2VDbGFzc2VzLnJvb3R9IHsgIG1hcmdpbjogMiUgMiUgMyUgMiU7IH1cbiAgICAgICAgICAue2xhYmVsfSB7Zm9udC1zaXplOiAxNnB4O31cbiAgICAgICAgICAue21hY2hpbmVfMX1cbiAgICAgIGB9PC9zdHlsZT5cblxuXG4gICAgICA8R3JpZCBjb250YWluZXIgc3BhY2luZz17M30+XG4gICAgICAgIHttYWNoaW5lcy5tYXAocm93ID0+IChcbiAgICAgICAgICA8R3JpZCBpdGVtIHhzPXsxfSBjbGFzc05hbWU9e3Jvdy5pZH0+XG4gICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImxhYmVsXCI+e3Jvdy5uYW1lfTwvbGFiZWw+XG4gICAgICAgICAgICA8UGFwZXIgY2xhc3NOYW1lPXtjbGFzc2VzLnBhcGVyfT48c3Bhbj57cm93LnRlbXB9JiMxNzY7PC9zcGFuPjxici8+PHNwYW4+e3Jvdy5wcmVzc3VyZX08L3NwYW4+PC9QYXBlcj5cbiAgICAgICAgICA8L0dyaWQ+XG4gICAgICAgICkpfVxuICAgICAgPC9HcmlkPlxuXG5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVaSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgXG4gICAgX2lzTW91bnRlZCA9IGZhbHNlO1xuXG4gICAgY29uc3RydWN0b3IocHJvcHMpe1xuICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgcm93czogXCJcIixcbiAgICAgICAgZW5kcG9pbnQ6IFwiaHR0cDovL2xvY2FsaG9zdDo0MDAwXCJcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKXtcbiAgICAgIC8vX2lzTW91bnRlZCBjaGVja3MgaWYgdGhlIGNvbXBvbmVudCBpcyBtb3VudGVkIGJlZm9yZSBjYWxsaW5nIGFwaSB0byBwcmV2ZW50IG1lbW9yeSBsZWFrXG4gICAgICB0aGlzLl9pc01vdW50ZWQgPSB0cnVlO1xuICAgICAgY29uc3QgeyBlbmRwb2ludCB9ID0gdGhpcy5zdGF0ZTtcbiAgICAgIGNvbnN0IHNvY2tldCA9IHNvY2tldElPQ2xpZW50KGVuZHBvaW50KTtcbiAgICAgIHNvY2tldC5vbihcIkZyb21DXCIsIGFzeW5jIGRhdGEgPT4ge1xuICAgICAgICAgIGlmKHRoaXMuX2lzTW91bnRlZCkge1xuICAgICAgICAgICAgdmFyIGpzb24gPSBhd2FpdCBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHJvd3M6IGpzb24ubWFjaGluZXMgfSk7XG4gICAgICAgICAgfVxuICAgICAgfSk7IFxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCl7XG4gICAgICB0aGlzLl9pc01vdW50ZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICBjb25zdCAgcm93cyAgID0gdGhpcy5zdGF0ZS5yb3dzO1xuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8aDE+TWFjaGluZSBsaXN0IHtyb3dzICA/ICA8ZGl2PjxVaVRhYmxlV2l0aFN0eWxlcyByb3dzPXtyb3dzfS8+PC9kaXY+IDogPGRpdiA+PENpcmN1bGFyUHJvZ3Jlc3MgLz48L2Rpdj59IDwvaDE+XG4gICAgICApO1xuICAgIH1cbn0iXX0= */\\n/*@ sourceURL=/home/bbnewey/node-workspace/next-mysql/components/Machine/Ui.js */\"), React.createElement(Grid, {\n    container: true,\n    spacing: 3\n  }, machines.map(function (row) {\n    return React.createElement(Grid, {\n      item: true,\n      xs: 1,\n      className: row.id\n    }, React.createElement(\"label\", {\n      className: \"jsx-827933388\" + \" \" + \"label\"\n    }, row.name), React.createElement(Paper, {\n      className: classes.paper\n    }, React.createElement(\"span\", {\n      className: \"jsx-827933388\"\n    }, row.temp, \"\\xB0\"), React.createElement(\"br\", {\n      className: \"jsx-827933388\"\n    }), React.createElement(\"span\", {\n      className: \"jsx-827933388\"\n    }, row.pressure)));\n  })));\n};\n\nvar Ui =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Ui, _React$Component);\n\n  function Ui(props) {\n    var _this;\n\n    _classCallCheck(this, Ui);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Ui).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"_isMounted\", false);\n\n    _this.state = {\n      rows: \"\",\n      endpoint: \"http://localhost:4000\"\n    };\n    return _this;\n  }\n\n  _createClass(Ui, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      //_isMounted checks if the component is mounted before calling api to prevent memory leak\n      this._isMounted = true;\n      var endpoint = this.state.endpoint;\n      var socket = socketIOClient(endpoint);\n      socket.on(\"FromC\",\n      /*#__PURE__*/\n      function () {\n        var _ref2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(data) {\n          var json;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  if (!_this2._isMounted) {\n                    _context.next = 5;\n                    break;\n                  }\n\n                  _context.next = 3;\n                  return JSON.parse(data);\n\n                case 3:\n                  json = _context.sent;\n\n                  _this2.setState({\n                    rows: json.machines\n                  });\n\n                case 5:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }());\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var rows = this.state.rows;\n      return React.createElement(\"h1\", null, \"Machine list \", rows ? React.createElement(\"div\", null, React.createElement(UiTableWithStyles, {\n        rows: rows\n      })) : React.createElement(\"div\", null, React.createElement(CircularProgress, null)), \" \");\n    }\n  }]);\n\n  return Ui;\n}(React.Component);\n\nexport { Ui as default };","map":{"version":3,"sources":["/home/bbnewey/node-workspace/next-mysql/components/Machine/Ui.js"],"names":["React","makeStyles","Paper","Grid","mergeClasses","CircularProgress","socketIOClient","green_tank","util","require","UiTableWithStyles","rows","useStyles","theme","root","flexGrow","padding","fontSize","paper","spacing","textAlign","color","palette","text","secondary","classes","machines","map","row","id","name","temp","pressure","Ui","props","state","endpoint","_isMounted","socket","on","data","JSON","parse","json","setState","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\n\nimport Grid from '@material-ui/core/Grid';\nimport { mergeClasses } from '@material-ui/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nimport socketIOClient from 'socket.io-client';\n\nimport green_tank from '../../assets/green_tank.png';\n\nconst util = require('../../util/util')\n\n//Necessary to use this function to allow the useStyles hook to work\nconst UiTableWithStyles = ({rows}) => {\n  const useStyles = makeStyles(theme => ({\n    root: {\n      flexGrow: 1,\n      padding: '30px',\n      fontSize: '16px',   \n    },\n    paper: {\n      padding: theme.spacing(2),\n      textAlign: 'center',\n      color: theme.palette.text.secondary,\n      padding: '30px 15px 32px 15px',\n      backgroundImage : `url(${green_tank})`\n    }\n  \n  }));\n\n  //only works inside a functional component\n  const classes = useStyles();\n\n  const machines = rows;\n\n  return (\n    <div className={mergeClasses.root}>\n\n\n      <style jsx>{`\n          .{mergeClasses.root} {  margin: 2% 2% 3% 2%; }\n          .{label} {font-size: 16px;}\n          .{machine_1}\n      `}</style>\n\n\n      <Grid container spacing={3}>\n        {machines.map(row => (\n          <Grid item xs={1} className={row.id}>\n          <label className=\"label\">{row.name}</label>\n            <Paper className={classes.paper}><span>{row.temp}&#176;</span><br/><span>{row.pressure}</span></Paper>\n          </Grid>\n        ))}\n      </Grid>\n\n\n    </div>\n  )\n}\n\nexport default class Ui extends React.Component {\n    \n    _isMounted = false;\n\n    constructor(props){\n      super(props);\n      this.state = {\n        rows: \"\",\n        endpoint: \"http://localhost:4000\"\n      };\n    }\n\n    componentDidMount(){\n      //_isMounted checks if the component is mounted before calling api to prevent memory leak\n      this._isMounted = true;\n      const { endpoint } = this.state;\n      const socket = socketIOClient(endpoint);\n      socket.on(\"FromC\", async data => {\n          if(this._isMounted) {\n            var json = await JSON.parse(data);\n            this.setState({ rows: json.machines });\n          }\n      }); \n    }\n\n    componentWillUnmount(){\n      this._isMounted = false;\n    }\n\n    render() {\n      const  rows   = this.state.rows;\n\n      return (\n        <h1>Machine list {rows  ?  <div><UiTableWithStyles rows={rows}/></div> : <div ><CircularProgress /></div>} </h1>\n      );\n    }\n}"]},"metadata":{},"sourceType":"module"}