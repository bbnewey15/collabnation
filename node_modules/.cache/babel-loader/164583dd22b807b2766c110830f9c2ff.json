{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport { mergeClasses } from '@material-ui/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport socketIOClient from 'socket.io-client';\nimport { Z_BLOCK } from 'zlib';\n\nvar util = require('../../util/util'); //Necessary to use this function to allow the useStyles hook to work\n\n\nvar UiTableWithStyles = function UiTableWithStyles(_ref) {\n  var rows = _ref.rows;\n  var useStyles = makeStyles(function (theme) {\n    var _paper;\n\n    return {\n      root: {\n        flexGrow: 1,\n        padding: '30px',\n        fontSize: '16px'\n      },\n      paper: (_paper = {\n        padding: theme.spacing(2),\n        textAlign: 'center',\n        color: theme.palette.text.secondary\n      }, _defineProperty(_paper, \"padding\", '30px 15px 32px 15px'), _defineProperty(_paper, \"backgroundImage\", \"url(/static/green_tank.png)\"), _paper),\n      Wrapper: {\n        display: 'block'\n      }\n    };\n  }); //only works inside a functional component\n\n  var classes = useStyles();\n  var machines = rows;\n  console.log(machines);\n  return React.createElement(\"div\", {\n    className: \"jsx-827933388\" + \" \" + (mergeClasses.root || \"\")\n  }, React.createElement(_JSXStyle, {\n    id: \"827933388\"\n  }, [\"..jsx-827933388{mergeClasses.root;}\", \".jsx-827933388{margin:2% 2% 3% 2%;}\", \"..jsx-827933388{label;}\", \".jsx-827933388{font-size:16px;}\", \"..jsx-827933388{machine_1;}\"]), React.createElement(Grid, {\n    container: true,\n    spacing: 3\n  }, machines.map(function (row) {\n    return React.createElement(Grid, {\n      item: true,\n      xs: 1,\n      className: row.id\n    }, React.createElement(\"label\", {\n      className: \"jsx-827933388\" + \" \" + \"label\"\n    }, row.name), React.createElement(Paper, {\n      className: classes.paper\n    }, React.createElement(\"span\", {\n      className: \"jsx-827933388\"\n    }, row.temp, \"\\xB0\"), React.createElement(\"br\", {\n      className: \"jsx-827933388\"\n    }), React.createElement(\"span\", {\n      className: \"jsx-827933388\"\n    }, row.pressure)));\n  })));\n};\n\nvar Ui =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Ui, _React$Component);\n\n  function Ui(props) {\n    var _this;\n\n    _classCallCheck(this, Ui);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Ui).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"_isMounted\", false);\n\n    _this.state = {\n      rows: \"\",\n      endpoint: \"http://localhost:4000\"\n    };\n    return _this;\n  }\n\n  _createClass(Ui, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      //_isMounted checks if the component is mounted before calling api to prevent memory leak\n      this._isMounted = true;\n      var endpoint = this.state.endpoint;\n      var socket = socketIOClient(endpoint);\n      socket.on(\"FromC\",\n      /*#__PURE__*/\n      function () {\n        var _ref2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(data) {\n          var json;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  if (!_this2._isMounted) {\n                    _context.next = 5;\n                    break;\n                  }\n\n                  _context.next = 3;\n                  return JSON.parse(data);\n\n                case 3:\n                  json = _context.sent;\n\n                  _this2.setState({\n                    rows: json.machines\n                  });\n\n                case 5:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }());\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var rows = this.state.rows;\n      return React.createElement(\"h1\", null, \"Machine list \", rows ? React.createElement(\"div\", null, React.createElement(UiTableWithStyles, {\n        rows: rows\n      })) : React.createElement(\"div\", null, React.createElement(CircularProgress, null)), \" \");\n    }\n  }]);\n\n  return Ui;\n}(React.Component);\n\nexport { Ui as default };","map":null,"metadata":{},"sourceType":"module"}